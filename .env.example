# Bitcoin Monitoring Stack configuration
# Copy this file to .env and adjust values as needed.

# --- Bitcoin Core ---
BITCOIN_RPC_HOST=127.0.0.1
BITCOIN_RPC_PORT=8332
# Uncomment to provide explicit RPC credentials instead of cookie auth
#BITCOIN_RPC_USER=
#BITCOIN_RPC_PASSWORD=
# Uncomment to point at a specific cookie file when autodetection fails
#BITCOIN_RPC_COOKIE_PATH=~/.bitcoin/.cookie   # autodetect if local
BITCOIN_NETWORK=mainnet
# Uncomment to use a locally-mounted datadir instead of the default volume
#BITCOIN_DATADIR=~/.bitcoin
# Uncomment to enable disk usage metrics for an external chainstate path
#BITCOIN_CHAINSTATE_DIR=~/.bitcoin/chainstate

# ZMQ endpoints
BITCOIN_ZMQ_RAWBLOCK=tcp://127.0.0.1:28332
BITCOIN_ZMQ_RAWTX=tcp://127.0.0.1:28333

# Optional Fulcrum/Electrs
# Uncomment to collect Fulcrum/Electrs statistics from a remote endpoint
#FULCRUM_STATS_URL=http://127.0.0.1:8080/stats

# --- InfluxDB ---
USE_EXTERNAL_INFLUX=0
INFLUX_URL=http://influxdb:8086
INFLUX_ORG=bitcoin
INFLUX_BUCKET=btc_metrics
INFLUX_RETENTION_DAYS=60
INFLUX_SETUP_USERNAME=admin
INFLUX_SETUP_PASSWORD=admin123
# Uncomment to supply an existing InfluxDB API token
#INFLUX_TOKEN=

# --- Grafana ---
USE_EXTERNAL_GRAFANA=0
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
EXPOSE_UI=0   # 0=localhost only; 1=expose to LAN (see HARDENING.md)
# When setting EXPOSE_UI=1 for remote access, update the bind addresses too.
GRAFANA_BIND_IP=127.0.0.1   # Default binds to loopback; change to 0.0.0.0 or LAN IP when exposing beyond localhost.
INFLUX_BIND_IP=127.0.0.1   # Default binds to loopback; change to 0.0.0.0 or LAN IP when exposing beyond localhost.

# --- Feature Flags ---
ENABLE_BLOCK_INTERVALS=1
ENABLE_SOFTFORK_SIGNAL=1
ENABLE_PEER_QUALITY=1
ENABLE_PROCESS_METRICS=1
ENABLE_DISK_IO=1
ENABLE_PEER_CHURN=1
ENABLE_ASN_STATS=1

# Mempool histogram source options:
#   - Leave as "none" to disable the Grafana fee histogram.
#   - Set to "core_rawmempool" to fetch the full verbose mempool on every fast scrape; this can be heavy.
#   - Set to "mempool_api" to query the configured base URL for /api/v1/fees/recommended-style JSON buckets.
MEMPOOL_HIST_SOURCE=none
# Uncomment to pull mempool data from any compatible mempool.space-style API service and ensure the stack can reach it over the network
#MEMPOOL_API_BASE=http://127.0.0.1:3006

# Collector polling
SCRAPE_INTERVAL_FAST=5
SCRAPE_INTERVAL_SLOW=30

# GeoIP
# Uncomment to add your MaxMind account credentials for GeoIP updates
#GEOIP_ACCOUNT_ID=
#GEOIP_LICENSE_KEY=
GEOIP_UPDATE_FREQUENCY_DAYS=7
